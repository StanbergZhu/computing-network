{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Header from \"@/components/Header\";\nimport Aside from \"@/components/Aside\";\nexport default {\n  name: 'MainPage',\n  data: function data() {\n    return {\n      tableData: [],\n      total: 0,\n      pageNum: 1,\n      pageSize: 5,\n      address: 1,\n      collapseBtnClass: 'el-icon-s-fold',\n      isCollapse: false,\n      sideWidth: 150,\n      logoTextShow: true,\n      meal_id: \"\",\n      meal_name: \"\",\n      dialogFormVisible: false,\n      form: {}\n    };\n  },\n  created: function created() {\n    this.load();\n  },\n  components: {\n    Aside: Aside,\n    Header: Header\n  },\n  methods: {\n    collapse: function collapse() {\n      //点击收缩菜单栏按钮触发\n      this.isCollapse = !this.isCollapse;\n\n      if (this.isCollapse) {\n        //收缩\n        this.sideWidth = 64;\n        this.collapseBtnClass = 'el-icon-s-unfold';\n        this.logoTextShow = false;\n      } else {\n        //展开\n        this.sideWidth = 200;\n        this.collapseBtnClass = 'el-icon-s-fold';\n        this.logoTextShow = true;\n      }\n    },\n    load: function load() {\n      var _this = this;\n\n      //请求分页查询数据(meal_id,meal_name,likes_num,comments_num\n      this.request.get(\"/meal/page\", {\n        params: {\n          pageSize: this.pageSize,\n          pageNum: this.pageNum,\n          address: this.address,\n          meal_id: this.meal_id,\n          meal_name: this.meal_name\n        }\n      }).then(function (res) {\n        console.log(res);\n        _this.tableData = res.records;\n        _this.total = res.total;\n      });\n    },\n    handleNewMeal: function handleNewMeal() {\n      this.dialogFormVisible = true;\n      this.form = {};\n    },\n    handleEdit: function handleEdit(row) {\n      this.form = row;\n      this.dialogFormVisible = true;\n    },\n    deleteMeal: function deleteMeal(id) {\n      var _this2 = this;\n\n      this.request.delete(\"/meal/\" + id).then(function (res) {\n        if (res) {\n          _this2.$message.success(\"删除成功:)\");\n\n          _this2.load();\n        } else {\n          _this2.$message.error(\"删除失败:(\");\n        }\n      });\n    },\n    save: function save() {\n      var _this3 = this;\n\n      //向后台发送新增和编辑数据\n      this.request.post(\"/meal\", this.form).then(function (res) {\n        if (res) {\n          _this3.$message.success(\"保存成功:)\");\n\n          _this3.dialogFormVisible = false;\n\n          _this3.load();\n        } else {\n          _this3.$message.error(\"保存失败:(\");\n        }\n      });\n    },\n    reset: function reset() {\n      this.meal_id = \"\";\n      this.meal_name = \"\";\n      this.load();\n    },\n    handleSizeChange: function handleSizeChange(pageSize) {\n      console.log(\"\\u6BCF\\u9875 \".concat(pageSize, \" \\u6761\"));\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange: function handleCurrentChange(pageNum) {\n      console.log(\"\\u5F53\\u524D\\u9875: \".concat(pageNum));\n      this.pageNum = pageNum;\n      this.load();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAoBA;AACA;AAEA;EACAA,gBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,aADA;MAEAC,QAFA;MAGAC,UAHA;MAIAC,WAJA;MAKAC,UALA;MAMAC,kCANA;MAOAC,iBAPA;MAQAC,cARA;MASAC,kBATA;MAUAC,WAVA;MAWAC,aAXA;MAYAC,wBAZA;MAaAC;IAbA;EAeA,CAlBA;EAmBAC,OAnBA,qBAmBA;IACA;EACA,CArBA;EAsBAC;IACAC,YADA;IAEAC;EAFA,CAtBA;EA0BAC;IACAC,QADA,sBACA;MAAA;MACA;;MACA;QAAA;QACA;QACA;QACA;MACA,CAJA,MAIA;QAAA;QACA;QACA;QACA;MACA;IACA,CAZA;IAaAC,IAbA,kBAaA;MAAA;;MACA;MACA;QACAC;UACAjB,uBADA;UAEAD,qBAFA;UAGAE,qBAHA;UAIAK,qBAJA;UAKAC;QALA;MADA,GAQAW,IARA,CAQA;QACAC;QACA;QACA;MACA,CAZA;IAaA,CA5BA;IA6BAC,aA7BA,2BA6BA;MACA;MACA;IACA,CAhCA;IAiCAC,UAjCA,sBAiCAC,GAjCA,EAiCA;MACA;MACA;IACA,CApCA;IAqCAC,UArCA,sBAqCAC,EArCA,EAqCA;MAAA;;MACA;QACA;UACA;;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAPA;IAQA,CA9CA;IA+CAC,IA/CA,kBA+CA;MAAA;;MAAA;MACA;QACA;UACA;;UACA;;UACA;QACA,CAJA,MAIA;UACA;QACA;MACA,CARA;IASA,CAzDA;IA0DAC,KA1DA,mBA0DA;MACA;MACA;MACA;IACA,CA9DA;IA+DAC,gBA/DA,4BA+DA3B,QA/DA,EA+DA;MACAmB;MACA;MACA;IACA,CAnEA;IAoEAS,mBApEA,+BAoEA7B,OApEA,EAoEA;MACAoB;MACA;MACA;IACA;EAxEA;AA1BA","names":["name","data","tableData","total","pageNum","pageSize","address","collapseBtnClass","isCollapse","sideWidth","logoTextShow","meal_id","meal_name","dialogFormVisible","form","created","components","Aside","Header","methods","collapse","load","params","then","console","handleNewMeal","handleEdit","row","deleteMeal","id","save","reset","handleSizeChange","handleCurrentChange"],"sourceRoot":"src/views","sources":["MainPage.vue"],"sourcesContent":["<template>\n  <el-container style=\"min-height: 100vh;\">\n    <el-aside width=\"sideWidth + 'px'\" style=\"background-color: rgb(238, 241, 246);box-shadow: 2px 0 6px rgb(0 21 41/40%)\">\n      <Aside :isCollapse=\"isCollapse\" :logoTextShow=\"logoTextShow\"/>\n    </el-aside>\n\n    <el-container>\n      <el-header style=\"border-bottom: 1px solid #ccc;\">\n        <Header :collapseBtnClass=\"collapseBtnClass\" :collapse=\"collapse\"/>\n      </el-header>\n\n      <el-main>\n        <router-view/>\n      </el-main>\n    </el-container>\n  </el-container>\n</template>\n\n<script>\n\nimport Header from \"@/components/Header\";\nimport Aside from \"@/components/Aside\";\n\nexport default {\n  name: 'MainPage',\n  data() {\n    return {\n      tableData: [],\n      total: 0,\n      pageNum: 1,\n      pageSize: 5,\n      address: 1,\n      collapseBtnClass: 'el-icon-s-fold',\n      isCollapse: false,\n      sideWidth:150,\n      logoTextShow:true,\n      meal_id: \"\",\n      meal_name: \"\",\n      dialogFormVisible:false,\n      form:{},\n    }\n  },\n  created() {\n    this.load()\n  },\n  components:{\n    Aside,\n    Header,\n  },\n  methods:{\n    collapse(){//点击收缩菜单栏按钮触发\n      this.isCollapse = !this.isCollapse;\n      if (this.isCollapse){//收缩\n        this.sideWidth = 64\n        this.collapseBtnClass = 'el-icon-s-unfold'\n        this.logoTextShow = false\n      }else {//展开\n        this.sideWidth = 200\n        this.collapseBtnClass = 'el-icon-s-fold'\n        this.logoTextShow = true\n      }\n    },\n    load(){\n      //请求分页查询数据(meal_id,meal_name,likes_num,comments_num\n      this.request.get(\"/meal/page\",{\n        params:{\n          pageSize:this.pageSize,\n          pageNum:this.pageNum,\n          address:this.address,\n          meal_id:this.meal_id,\n          meal_name:this.meal_name,\n        }\n      }).then(res =>{\n        console.log(res)\n        this.tableData = res.records\n        this.total = res.total\n      })\n    },\n    handleNewMeal(){\n      this.dialogFormVisible = true\n      this.form = {}\n    },\n    handleEdit(row){\n      this.form = row\n      this.dialogFormVisible = true\n    },\n    deleteMeal(id){\n      this.request.delete(\"/meal/\"+id).then(res =>{\n        if(res){\n          this.$message.success(\"删除成功:)\")\n          this.load()\n        }else {\n          this.$message.error(\"删除失败:(\")\n        }\n      })\n    },\n    save(){//向后台发送新增和编辑数据\n      this.request.post(\"/meal\",this.form).then(res =>{\n        if(res){\n          this.$message.success(\"保存成功:)\")\n          this.dialogFormVisible = false\n          this.load()\n        }else {\n          this.$message.error(\"保存失败:(\")\n        }\n      })\n    },\n    reset(){\n      this.meal_id=\"\"\n      this.meal_name=\"\"\n      this.load()\n    },\n    handleSizeChange(pageSize) {\n      console.log(`每页 ${pageSize} 条`);\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {\n      console.log(`当前页: ${pageNum}`);\n      this.pageNum = pageNum\n      this.load()\n    },\n\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}